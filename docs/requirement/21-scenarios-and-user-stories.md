# åœºæ™¯ä¸ç”¨æˆ·æ—…ç¨‹ (Scenarios and User Journeys)

**æ–‡æ¡£çŠ¶æ€**: Tier 3 - è§„èŒƒæ–‡æ¡£  
**ç›®æ ‡å—ä¼—**: äº§å“ç»ç†ã€QAå·¥ç¨‹å¸ˆã€ç”¨æˆ·ä½“éªŒè®¾è®¡å¸ˆ  
**æœ€åæ›´æ–°**: 2026-01-31  
**ç‰ˆæœ¬**: 2.0

---

## å¯¼è¯»

æœ¬æ–‡æ¡£é€šè¿‡**å®Œæ•´ç”¨æˆ·æ—…ç¨‹**éªŒè¯èƒ½åŠ›æ¨¡å‹ã€‚æ¯ä¸ªåœºæ™¯åŒ…å«ï¼šæˆåŠŸè·¯å¾„ï¼ˆHappy Pathï¼‰+ å¤±è´¥/å‡çº§è·¯å¾„ï¼ˆUnhappy Pathï¼‰ã€‚

é˜…è¯»æœ¬æ–‡æ¡£åï¼Œä½ åº”è¯¥ç†è§£ï¼šçœŸå®ç”¨æˆ·å¦‚ä½•ä½¿ç”¨PonyBunnyï¼Ÿç³»ç»Ÿå¦‚ä½•å¤„ç†å¼‚å¸¸æƒ…å†µï¼Ÿ

**å‰ç½®é˜…è¯»**:
- [00-vision-and-problem.md](./00-vision-and-problem.md) â€” ç›®æ ‡ç”¨æˆ·ç”»åƒ
- [20-capability-requirements.md](./20-capability-requirements.md) â€” èƒ½åŠ›éœ€æ±‚

---

## ç”¨æˆ·è§’è‰²å®šä¹‰

| è§’è‰² | ç‰¹å¾ | å…¸å‹åœºæ™¯ |
|:-----|:-----|:---------|
| **ä¸ªäººå¼€å‘è€…** | 1äººï¼ŒMacBookï¼Œä¸ªäººé¡¹ç›® | ä»£ç å¼€å‘ã€è°ƒè¯•ã€æ–‡æ¡£ç”Ÿæˆ |
| **è‡ªé›‡è€…** | Freelancer/å’¨è¯¢å¸ˆ | å®¢æˆ·æ²Ÿé€šã€é¡¹ç›®ç®¡ç†ã€å†…å®¹åˆ›ä½œ |
| **æŠ€æœ¯çˆ±å¥½è€…** | å®¶åº­å®éªŒå®¤ã€æ™ºèƒ½å®¶å±… | è®¾å¤‡è‡ªåŠ¨åŒ–ã€æ•°æ®åˆ†æ |
| **å°å›¢é˜Ÿæˆå‘˜** | 2-5äººæ¾è€¦åˆåä½œ | å…±äº«Agentå®ä¾‹ã€ä»»åŠ¡åˆ†é… |

---

## åœºæ™¯åˆ†ç±»

### æŒ‰æ‰§è¡Œæ—¶é•¿

| ç±»å‹ | æ—¶é•¿ | ç¤ºä¾‹ |
|:-----|:-----|:-----|
| **å³æ—¶å“åº”** | \u003c 1åˆ†é’Ÿ | æŸ¥è¯¢å½“å‰å¤©æ°”ã€è®¡ç®—è¡¨è¾¾å¼ |
| **çŸ­æœŸä»»åŠ¡** | 1åˆ†é’Ÿ - 1å°æ—¶ | åˆ†ææ—¥å¿—æ–‡ä»¶ã€ç”Ÿæˆä»£ç ç‰‡æ®µ |
| **ä¸­æœŸç›®æ ‡** | 1å°æ—¶ - 1å¤© | å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½ã€é‡æ„æ¨¡å— |
| **é•¿æœŸé¡¹ç›®** | 1å¤©+ | æ„å»ºå®Œæ•´åº”ç”¨ã€å­¦ä¹ æ–°æŠ€æœ¯æ ˆ |

### æŒ‰äº¤äº’æ¨¡å¼

| ç±»å‹ | ç‰¹å¾ | ç¤ºä¾‹ |
|:-----|:-----|:-----|
| **å¯¹è¯å¼** | æ¥å›æ¾„æ¸…ã€è¿­ä»£ä¼˜åŒ– | \"å¸®æˆ‘ä¼˜åŒ–è¿™æ®µä»£ç \" |
| **å‘½ä»¤å¼** | æ˜ç¡®æŒ‡ä»¤ã€ä¸€æ¬¡æ‰§è¡Œ | \"è¿è¡Œpytestå¹¶æŠ¥å‘Šç»“æœ\" |
| **å®šæ—¶å¼** | Cronè§¦å‘ã€æ— äººå€¼å®ˆ | æ¯æ—¥æ—©8ç‚¹æ’­æŠ¥å¤©æ°” |
| **äº‹ä»¶å¼** | Webhookè§¦å‘ | GitHub PRåˆ›å»ºåè‡ªåŠ¨å®¡æŸ¥ |

---

## åœºæ™¯1: å³æ—¶ä»£ç åˆ†æï¼ˆå¯¹è¯å¼Â·çŸ­æœŸï¼‰

### è§’è‰²
ä¸ªäººå¼€å‘è€…ï¼ˆAlexï¼‰

### ç›®æ ‡
åˆ†æPythonè„šæœ¬çš„æ€§èƒ½é—®é¢˜å¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®

### å‰ç½®æ¡ä»¶
- PonyBunnyå·²é…ç½®Telegram Channel
- Dockeræ²™ç®±å¯ç”¨
- Pythonå·¥å…·é›†å·²å®‰è£…

---

### æˆåŠŸè·¯å¾„ï¼ˆHappy Pathï¼‰

**æ­¥éª¤1: ç”¨æˆ·å‘èµ·è¯·æ±‚**
```
[Telegram] Alex: "åˆ†æè¿™ä¸ªè„šæœ¬çš„æ€§èƒ½é—®é¢˜ /attach data_processor.py"
```

**ç³»ç»Ÿè¡Œä¸º**:
- Gatewayæ¥æ”¶æ¶ˆæ¯å¹¶é™„ä»¶
- åˆ›å»ºGoal: "åˆ†ædata_processor.pyçš„æ€§èƒ½é—®é¢˜"
- ä¼°ç®—budget: 5000 tokens, 15åˆ†é’Ÿ

**æ­¥éª¤2: Agentåˆ†æä»£ç **
```
Agent: "æ­£åœ¨åˆ†æä»£ç ..."
    â†“
è¯»å–æ–‡ä»¶å†…å®¹ï¼ˆ140è¡ŒPythonä»£ç ï¼‰
    â†“
è¯†åˆ«æ€§èƒ½é—®é¢˜ï¼š
- åµŒå¥—å¾ªç¯ O(nÂ²) å¤æ‚åº¦
- æœªä½¿ç”¨ç¼“å­˜é‡å¤è®¡ç®—
- æœªä½¿ç”¨å‘é‡åŒ–æ“ä½œ
```

**æ­¥éª¤3: ç”Ÿæˆä¼˜åŒ–å»ºè®®**
```
Agent â†’ Telegram:
"å‘ç°3ä¸ªæ€§èƒ½é—®é¢˜ï¼š

1. **åµŒå¥—å¾ªç¯** (è¡Œ23-35)
   - å½“å‰å¤æ‚åº¦: O(nÂ²)
   - å»ºè®®: ä½¿ç”¨å­—å…¸æŸ¥æ‰¾ä¼˜åŒ–ä¸ºO(n)
   
2. **é‡å¤è®¡ç®—** (è¡Œ50-62)
   - å‡½æ•°`calculate_score()`åœ¨å¾ªç¯ä¸­é‡å¤è°ƒç”¨
   - å»ºè®®: ç¼“å­˜ç»“æœæˆ–é¢„è®¡ç®—
   
3. **æœªä½¿ç”¨å‘é‡åŒ–** (è¡Œ80-95)
   - Pandas DataFrameé€è¡Œè¿­ä»£
   - å»ºè®®: ä½¿ç”¨`.apply()`æˆ–`.vectorized()`

éœ€è¦æˆ‘ç”Ÿæˆä¼˜åŒ–åçš„ä»£ç å—ï¼Ÿ"
```

**æ­¥éª¤4: ç”¨æˆ·ç¡®è®¤å¹¶ç”Ÿæˆä»£ç **
```
[Telegram] Alex: "æ˜¯çš„ï¼Œç”Ÿæˆä¼˜åŒ–ä»£ç "
```

**ç³»ç»Ÿè¡Œä¸º**:
- åˆ›å»ºWork Item: "é‡å†™data_processor.pyä¼˜åŒ–æ€§èƒ½"
- ç”Ÿæˆä¼˜åŒ–ä»£ç 
- è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- åˆ›å»ºArtifact: `data_processor_optimized.py`

**æ­¥éª¤5: äº¤ä»˜ç»“æœ**
```
Agent â†’ Telegram:
"âœ… ä¼˜åŒ–å®Œæˆï¼

æ€§èƒ½æå‡:
- åŸå§‹: 12.3ç§’å¤„ç†10kè¡Œ
- ä¼˜åŒ–å: 0.8ç§’å¤„ç†10kè¡Œï¼ˆ15å€æå‡ï¼‰

æ–‡ä»¶å·²ä¿å­˜: /artifacts/data_processor_optimized.py

éœ€è¦æˆ‘åˆ›å»ºPRå—ï¼Ÿ"
```

**ç»“æœ**:
- GoalçŠ¶æ€: `completed`
- è€—æ—¶: 3åˆ†é’Ÿ
- æ¶ˆè€—: 1200 tokens
- Artifacts: 1ä¸ªæ–‡ä»¶

---

### å¤±è´¥è·¯å¾„A: æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ

**æ­¥éª¤1-2: åŒæˆåŠŸè·¯å¾„**

**æ­¥éª¤3: Agenté‡åˆ°é—®é¢˜**
```
Agentåˆ†ææ–‡ä»¶ â†’ å‘ç°æ˜¯compiled .pycæ–‡ä»¶ï¼Œæ— æ³•è¯»å–æºä»£ç 
```

**ç³»ç»Ÿè¡Œä¸ºï¼ˆè‡ªä¸»æ¢å¤ï¼‰**:
```
Agent â†’ Telegram:
"âŒ æ— æ³•åˆ†æ.pycæ–‡ä»¶ï¼ˆcompiled bytecodeï¼‰ã€‚

è¯·æä¾›ä»¥ä¸‹ä¹‹ä¸€ï¼š
1. åŸå§‹.pyæºä»£ç æ–‡ä»¶
2. ä½¿ç”¨`uncompyle6`å·¥å…·åç¼–è¯‘ï¼ˆéœ€è¦æ‰¹å‡†ï¼‰

å¦‚ä½•ç»§ç»­ï¼Ÿ"
```

**ç”¨æˆ·å“åº”**:
```
[Telegram] Alex: /attach data_processor.py
```

**æ¢å¤æ‰§è¡Œ** â†’ å›åˆ°æˆåŠŸè·¯å¾„æ­¥éª¤3

---

### å¤±è´¥è·¯å¾„B: åˆ†æè¶…æ—¶ï¼ˆéœ€å‡çº§ï¼‰

**æ­¥éª¤2: Agentåˆ†æä»£ç **
```
æ–‡ä»¶å¤§å°: 5000è¡Œ
åŒ…å«å¤æ‚å¼‚æ­¥é€»è¾‘ã€å¤šå±‚ç»§æ‰¿
```

**ç³»ç»Ÿè¡Œä¸º**:
- åˆ†æè¿è¡Œ15åˆ†é’Ÿä»æœªå®Œæˆ
- Budget timeå³å°†è€—å°½ï¼ˆè¿˜å‰©1åˆ†é’Ÿï¼‰

**Escalationè§¦å‘**:
```
Agent â†’ Telegram:
"â±ï¸ ä»»åŠ¡å³å°†è¶…æ—¶

å½“å‰è¿›åº¦: 60%
å‰©ä½™æ—¶é—´: 1åˆ†é’Ÿ

é€‰é¡¹:
A. å¢åŠ 15åˆ†é’Ÿæ—¶é—´budgetï¼ˆä¼°ç®—æ€»å…±éœ€è¦25åˆ†é’Ÿï¼‰
B. ä»…åˆ†æå‰500è¡Œï¼ˆå¿«é€Ÿä½†ä¸å®Œæ•´ï¼‰
C. ç»ˆæ­¢ä»»åŠ¡

è¯·é€‰æ‹©: A / B / C"
```

**ç”¨æˆ·é€‰æ‹©A**:
```
[Telegram] Alex: "A"
```

**ç³»ç»Ÿè¡Œä¸º**:
- æ›´æ–°Goal budget: max_minutes = 30
- æ¢å¤åˆ†æ â†’ ç»§ç»­åˆ°æˆåŠŸè·¯å¾„æ­¥éª¤3

---

## åœºæ™¯2: å¤šå¤©åŠŸèƒ½å¼€å‘ï¼ˆå‘½ä»¤å¼Â·é•¿æœŸï¼‰

### è§’è‰²
ä¸ªäººå¼€å‘è€…ï¼ˆJamieï¼‰

### ç›®æ ‡
ä¸ºä¸ªäººåšå®¢ç³»ç»Ÿæ·»åŠ è¯„è®ºåŠŸèƒ½ï¼ˆé¢„è®¡2-3å¤©ï¼‰

### å‰ç½®æ¡ä»¶
- ä»£ç ä»“åº“å·²å…‹éš†åˆ°æœ¬åœ°
- PonyBunnyé…ç½®äº†GitHubé›†æˆ
- Dockeræ²™ç®±å¯ç”¨

---

### æˆåŠŸè·¯å¾„ï¼ˆHappy Pathï¼‰

**Day 1 - æ­¥éª¤1: åˆ›å»ºé•¿æœŸGoal**
```
[WebSocket] Jamie: "å®ç°åšå®¢è¯„è®ºåŠŸèƒ½ï¼š
- ç”¨æˆ·å¯å‘å¸ƒè¯„è®º
- æ”¯æŒå›å¤å’Œç‚¹èµ
- ååƒåœ¾æ£€æµ‹
- æµ‹è¯•è¦†ç›–ç‡>80%
- Budget: 200k tokens, 72å°æ—¶"
```

**ç³»ç»Ÿè¡Œä¸º**:
- åˆ›å»ºGoalï¼ˆgoal-789ï¼‰
- çŠ¶æ€: `active`
- åˆ†è§£ä¸º8ä¸ªWork Items:
  ```
  wi-1: è®¾è®¡æ•°æ®åº“schemaï¼ˆè¯„è®ºè¡¨ã€å›å¤è¡¨ï¼‰
  wi-2: åˆ›å»ºmigrationæ–‡ä»¶
  wi-3: å®ç°è¯„è®ºAPI endpoints
  wi-4: å®ç°å›å¤åŠŸèƒ½
  wi-5: é›†æˆåƒåœ¾æ£€æµ‹æœåŠ¡ï¼ˆAkismetï¼‰
  wi-6: æ·»åŠ ç‚¹èµåŠŸèƒ½
  wi-7: ç¼–å†™å•å…ƒæµ‹è¯•
  wi-8: ç¼–å†™é›†æˆæµ‹è¯•
  ```

**Day 1 - æ­¥éª¤2-5: æ‰§è¡Œå‰3ä¸ªWork Items**
```
09:00 - å¼€å§‹wi-1ï¼ˆschemaè®¾è®¡ï¼‰
09:30 - å®Œæˆwi-1ï¼Œç”Ÿæˆschema.sql
10:00 - å¼€å§‹wi-2ï¼ˆmigrationï¼‰
10:45 - âš ï¸ wi-2å¤±è´¥ï¼šmigrationè¯­æ³•é”™è¯¯
11:00 - è‡ªåŠ¨é‡è¯•wi-2ï¼ˆä¿®å¤SQLè¯­æ³•ï¼‰
11:15 - å®Œæˆwi-2
13:00 - å¼€å§‹wi-3ï¼ˆAPI endpointsï¼‰
15:30 - å®Œæˆwi-3ï¼Œåˆ›å»ºPR draft
```

**Day 1 - æ­¥éª¤6: Context Packç”Ÿæˆ**
```
16:00 - ç³»ç»Ÿè‡ªåŠ¨ç”ŸæˆContext Pack #1:
{
  "checkpoint_number": 1,
  "completed": ["wi-1", "wi-2", "wi-3"],
  "in_progress": null,
  "next_steps": ["wi-4: å®ç°å›å¤åŠŸèƒ½"],
  "decisions": [
    {
      "summary": "é€‰æ‹©é€’å½’CTEå®ç°è¯„è®ºæ ‘ç»“æ„ï¼ˆæ€§èƒ½ä¼˜äºåµŒå¥—æŸ¥è¯¢ï¼‰"
    }
  ],
  "budget_remaining": {
    "tokens": 175000,
    "hours": 61
  }
}
```

**Day 1 - ç”¨æˆ·check-in**:
```
[Telegram] Jamie: "å½“å‰è¿›åº¦å¦‚ä½•ï¼Ÿ"

Agent â†’ Jamie:
"ğŸ“Š Goalè¿›åº¦: 37% (3/8 work itemså®Œæˆ)

âœ… å·²å®Œæˆ:
- wi-1: æ•°æ®åº“schemaè®¾è®¡
- wi-2: Migrationæ–‡ä»¶ï¼ˆç»è¿‡1æ¬¡é‡è¯•ï¼‰
- wi-3: è¯„è®ºAPI endpoints

â­ï¸ ä¸‹ä¸€æ­¥: wi-4 å®ç°å›å¤åŠŸèƒ½ï¼ˆé¢„è®¡2å°æ—¶ï¼‰

ğŸ’° Budgetå‰©ä½™: 175k tokens (87%), 61å°æ—¶ (85%)

é¢„è®¡æ˜å¤©ä¸‹åˆå®Œæˆæ‰€æœ‰å¼€å‘ï¼Œåå¤©å®Œæˆæµ‹è¯•"
```

---

**Day 2 - æ­¥éª¤7-10: ç»§ç»­æ‰§è¡Œ**
```
09:00 - ä»Context Packæ¢å¤çŠ¶æ€
09:05 - å¼€å§‹wi-4ï¼ˆå›å¤åŠŸèƒ½ï¼‰
12:00 - å®Œæˆwi-4
14:00 - å¼€å§‹wi-5ï¼ˆåƒåœ¾æ£€æµ‹ï¼‰
14:30 - âŒ Escalation: éœ€è¦Akismet API Key
```

**Escalationå¤„ç†**:
```
Agent â†’ Telegram:
"ğŸ”‘ ç¼ºå°‘Akismet API Key

wi-5éœ€è¦è°ƒç”¨Akismet APIè¿›è¡Œåƒåœ¾æ£€æµ‹ï¼Œä½†configä¸­æœªæ‰¾åˆ°API Keyã€‚

é€‰é¡¹:
A. æä¾›Akismet API Keyï¼ˆæ¨èï¼‰
B. è·³è¿‡åƒåœ¾æ£€æµ‹ï¼ˆé™ä½åŠŸèƒ½å®Œæ•´æ€§ï¼‰
C. ä½¿ç”¨ç®€å•è§„åˆ™æ›¿ä»£ï¼ˆåŸºäºå…³é”®è¯ï¼‰

å½“å‰å·²å®Œæˆ: 50% (4/8)
è¯·é€‰æ‹©: A / B / C"
```

**ç”¨æˆ·å“åº”**:
```
[Telegram] Jamie: "A
AKISMET_API_KEY=abc123xyz"
```

**ç³»ç»Ÿè¡Œä¸º**:
- æ›´æ–°configï¼Œæ·»åŠ API Key
- æ¢å¤wi-5æ‰§è¡Œ
- 16:00 - å®Œæˆwi-5
- 18:00 - å®Œæˆwi-6ï¼ˆç‚¹èµåŠŸèƒ½ï¼‰

**Day 2 - Context Pack #2**:
```
{
  "checkpoint_number": 2,
  "completed": ["wi-1"..."wi-6"],
  "in_progress": null,
  "next_steps": ["wi-7: å•å…ƒæµ‹è¯•", "wi-8: é›†æˆæµ‹è¯•"],
  "budget_remaining": {
    "tokens": 120000,
    "hours": 38
  }
}
```

---

**Day 3 - æ­¥éª¤11-13: æµ‹è¯•ä¸QA**
```
09:00 - å¼€å§‹wi-7ï¼ˆå•å…ƒæµ‹è¯•ï¼‰
12:00 - å®Œæˆwi-7ï¼ˆè¦†ç›–ç‡85%ï¼‰
14:00 - å¼€å§‹wi-8ï¼ˆé›†æˆæµ‹è¯•ï¼‰
16:30 - å®Œæˆwi-8
```

**Quality Gatesæ‰§è¡Œ**:
```
17:00 - è¿è¡Œæ‰€æœ‰QG:
  âœ… npm test (12 tests passed)
  âœ… npm run build (successful)
  âœ… npm run lint (no errors)
  âœ… coverage check (85% > 80% target)
  âš ï¸ LLM Review: 1 warning
      "API endpoint /comments/:idç¼ºå°‘rate limiting"
```

**æ­¥éª¤14: äº¤ä»˜**
```
Agent â†’ GitHub:
- åˆ›å»ºPR #42: "feat: implement blog comment system"
- Description:
  """
  ## Summary
  å®ç°å®Œæ•´çš„åšå®¢è¯„è®ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬å›å¤ã€ç‚¹èµå’Œåƒåœ¾æ£€æµ‹ã€‚
  
  ## Work Items Completed (8/8)
  âœ… wi-1: æ•°æ®åº“schemaè®¾è®¡
  âœ… wi-2: Migrationæ–‡ä»¶
  âœ… wi-3: è¯„è®ºAPI endpoints
  âœ… wi-4: å›å¤åŠŸèƒ½
  âœ… wi-5: Akismetåƒåœ¾æ£€æµ‹é›†æˆ
  âœ… wi-6: ç‚¹èµåŠŸèƒ½
  âœ… wi-7: å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡85%ï¼‰
  âœ… wi-8: é›†æˆæµ‹è¯•
  
  ## Quality Gates
  âœ… All deterministic gates passed
  âš ï¸ LLM Review: Consider adding rate limiting to comment endpoints
  
  ## Decisions
  - ä½¿ç”¨é€’å½’CTEå®ç°è¯„è®ºæ ‘ç»“æ„
  - é€‰æ‹©Akismetä½œä¸ºåƒåœ¾æ£€æµ‹æœåŠ¡
  
  Goal ID: goal-789
  """
  
Agent â†’ Telegram:
"ğŸ‰ Goalå®Œæˆï¼

æ€»è€—æ—¶: 2.5å¤©
Tokenæ¶ˆè€—: 85k / 200k (42%)
æˆæœ¬ä¼°ç®—: $4.20

PRå·²åˆ›å»º: github.com/jamie/blog/pull/42

âš ï¸ å»ºè®®: è€ƒè™‘ä¸ºè¯„è®ºendpointæ·»åŠ rate limiting

è¯·reviewå¹¶merge PR"
```

**ç»“æœ**:
- GoalçŠ¶æ€: `completed`
- å®é™…è€—æ—¶: 2.5å¤©ï¼ˆé¢„ä¼°2-3å¤©ï¼‰
- BudgetèŠ‚çœ: 115k tokensæœªä½¿ç”¨
- Artifacts: 15ä¸ªæ–‡ä»¶ï¼ˆä»£ç ã€æµ‹è¯•ã€migrationï¼‰
- Escalations: 1æ¬¡ï¼ˆAPI Keyï¼‰
- è‡ªåŠ¨é‡è¯•: 1æ¬¡ï¼ˆmigrationè¯­æ³•é”™è¯¯ï¼‰

---

### å¤±è´¥è·¯å¾„C: ä¸­é€”æ”¾å¼ƒï¼ˆç”¨æˆ·ä¸»åŠ¨ï¼‰

**Day 2 - 15:00: ç”¨æˆ·å†³å®šç»ˆæ­¢**
```
[Telegram] Jamie: "/stop goal-789
åŸå› ï¼šå®¢æˆ·éœ€æ±‚å˜æ›´ï¼Œæš‚ä¸éœ€è¦è¯„è®ºåŠŸèƒ½"
```

**ç³»ç»Ÿè¡Œä¸º**:
- ç«‹å³åœæ­¢æ‰€æœ‰Work Items
- ç”Ÿæˆæœ€ç»ˆContext Pack:
  ```
  {
    "status": "cancelled",
    "completed": ["wi-1", "wi-2", "wi-3", "wi-4"],
    "in_progress": "wi-5",
    "cancelled_work_items": ["wi-5", "wi-6", "wi-7", "wi-8"],
    "reason": "ç”¨æˆ·ä¸»åŠ¨ç»ˆæ­¢ï¼šéœ€æ±‚å˜æ›´",
    "budget_used": {
      "tokens": 80000,
      "hours": 24
    }
  }
  ```
- ä¿å­˜æ‰€æœ‰å·²å®Œæˆçš„Artifacts
- GoalçŠ¶æ€: `cancelled`

**Agentå“åº”**:
```
"Goalå·²ç»ˆæ­¢

âœ… å·²å®Œæˆwork items: 4/8 (50%)
  - wi-1: æ•°æ®åº“schema
  - wi-2: Migrationæ–‡ä»¶
  - wi-3: è¯„è®ºAPI endpoints
  - wi-4: å›å¤åŠŸèƒ½

ğŸ’¾ Artifactså·²ä¿å­˜: /artifacts/goal-789/
ğŸ“¦ Context Packå·²ç”Ÿæˆï¼Œæœªæ¥å¯æ¢å¤æ­¤Goal

éœ€è¦æ—¶å¯è¿è¡Œï¼š/resume goal-789"
```

---

## åœºæ™¯3: å®šæ—¶ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼ˆå®šæ—¶å¼Â·å³æ—¶ï¼‰

### è§’è‰²
æŠ€æœ¯çˆ±å¥½è€…ï¼ˆSamï¼‰

### ç›®æ ‡
æ¯å¤©æ—©8ç‚¹æ’­æŠ¥å¤©æ°”å’Œæ—¥ç¨‹

### å‰ç½®æ¡ä»¶
- Cron Laneå·²å¯ç”¨
- é…ç½®äº†HomePod TTSé›†æˆ
- æ—¥å†APIå·²æˆæƒ

---

### æˆåŠŸè·¯å¾„ï¼ˆHappy Pathï¼‰

**é…ç½®Cronä»»åŠ¡**:
```yaml
cron_jobs:
  - name: "morning_briefing"
    schedule: "0 8 * * *"  # æ¯å¤©æ—©8ç‚¹
    timezone: "America/Los_Angeles"
    prompt: "ç”Ÿæˆä»Šæ—¥ç®€æŠ¥å¹¶é€šè¿‡HomePodæ’­æŠ¥"
```

**Day 1 - 08:00:00 è§¦å‘**:
```
ç³»ç»Ÿ â†’ Cron Lane:
  åˆ›å»ºGoalï¼ˆgoal-daily-001ï¼‰
  
Agentå¼€å§‹æ‰§è¡Œ:
  1. æŸ¥è¯¢å¤©æ°”APIï¼ˆOpenWeatherMapï¼‰
  2. æŸ¥è¯¢Google Calendar API
  3. ç”Ÿæˆç®€æŠ¥æ–‡æœ¬
  4. è°ƒç”¨HomePod TTSæ’­æŠ¥
```

**ç”Ÿæˆå†…å®¹**:
```
"æ—©ä¸Šå¥½Samï¼Œä»Šå¤©æ˜¯1æœˆ31æ—¥æ˜ŸæœŸå…­ã€‚

å¤©æ°”ï¼šæ—§é‡‘å±±ï¼Œæ™´ï¼Œæœ€é«˜15Â°Cï¼Œæœ€ä½8Â°Cï¼Œé™é›¨æ¦‚ç‡10%ã€‚å»ºè®®ç©¿è½»å¤–å¥—ã€‚

ä»Šæ—¥æ—¥ç¨‹ï¼ˆ3é¡¹ï¼‰:
- 09:30 ä¸å®¢æˆ·è§†é¢‘ä¼šè®®ï¼ˆZoomé“¾æ¥å·²å‘é€åˆ°æ‰‹æœºï¼‰
- 14:00 å¥èº«æˆ¿é¢„çº¦
- 19:00 æœ‹å‹èšé¤

ç¥ä½ æœ‰ç¾å¥½çš„ä¸€å¤©ï¼"
```

**HomePodæ’­æŠ¥**:
- 08:00:15 å¼€å§‹æ’­æ”¾è¯­éŸ³
- 08:00:45 æ’­æŠ¥å®Œæˆ

**ç»“æœ**:
- GoalçŠ¶æ€: `completed`
- è€—æ—¶: 45ç§’
- æ¶ˆè€—: 500 tokens

---

### å¤±è´¥è·¯å¾„D: APIä¸å¯ç”¨ï¼ˆè‡ªåŠ¨é™çº§ï¼‰

**08:00:00 è§¦å‘ â†’ å¤©æ°”APIæ•…éšœ**:
```
Agentå°è¯•è°ƒç”¨OpenWeatherMap API
    â†“
HTTP 500 Error (æœåŠ¡å™¨é”™è¯¯)
```

**è‡ªåŠ¨é™çº§ç­–ç•¥**:
```
Agentç­–ç•¥:
1. é‡è¯•1æ¬¡ï¼ˆå»¶è¿Ÿ2ç§’ï¼‰
    â†“ ä»ç„¶å¤±è´¥
2. åˆ‡æ¢åˆ°å¤‡ç”¨å¤©æ°”APIï¼ˆWeather.comï¼‰
    â†“ æˆåŠŸ
3. ç»§ç»­æ‰§è¡Œæ—¥ç¨‹æŸ¥è¯¢
```

**é™çº§åæ’­æŠ¥**:
```
"æ—©ä¸Šå¥½Samï¼Œä»Šå¤©æ˜¯1æœˆ31æ—¥æ˜ŸæœŸå…­ã€‚

å¤©æ°”ï¼šæ—§é‡‘å±±ï¼Œæ™´ï¼Œ15Â°Cï¼ˆæ•°æ®æ¥æºï¼šWeather.comï¼Œä¸»APIæš‚æ—¶ä¸å¯ç”¨ï¼‰ã€‚

ä»Šæ—¥æ—¥ç¨‹...ï¼ˆæ­£å¸¸ï¼‰"
```

**åå°è®°å½•**:
```
Decision:
  "OpenWeatherMap APIæ•…éšœï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°Weather.com"

Audit Log:
  "08:00:03 - APIè°ƒç”¨å¤±è´¥: api.openweathermap.org (HTTP 500)"
  "08:00:05 - Failover to api.weather.com (HTTP 200)"
```

---

### å¤±è´¥è·¯å¾„E: å®Œå…¨å¤±è´¥ï¼ˆå‡çº§ï¼‰

**08:00:00 è§¦å‘ â†’ æ‰€æœ‰APIéƒ½æ•…éšœ**:
```
å¤©æ°”API: å¤±è´¥
å¤‡ç”¨å¤©æ°”API: å¤±è´¥
æ—¥å†API: å¤±è´¥
```

**Escalationï¼ˆé™é»˜æ¨¡å¼ï¼‰**:
```
ç”±äºæ˜¯Cronä»»åŠ¡ï¼ˆæ— ç”¨æˆ·åœ¨çº¿ï¼‰ï¼ŒEscalationé™é»˜è®°å½•ï¼Œä¸æ‰“æ‰°ç”¨æˆ·

Escalation Packet:
{
  "type": "api_unavailable",
  "urgency": "low",
  "silent": true,
  "message": "æ—©é—´ç®€æŠ¥å¤±è´¥ï¼šæ‰€æœ‰APIä¸å¯ç”¨",
  "next_retry": "æ˜å¤©08:00"
}
```

**é€šçŸ¥ç­–ç•¥**:
- **ä¸å‘é€**: æ¨é€é€šçŸ¥ï¼ˆç”¨æˆ·å¯èƒ½åœ¨ç¡è§‰ï¼‰
- **å‘é€**: é‚®ä»¶é€šçŸ¥ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
  ```
  ä¸»é¢˜ï¼š[PonyBunny] æ—©é—´ç®€æŠ¥å¤±è´¥ï¼ˆ2026-01-31ï¼‰
  å†…å®¹ï¼šæ‰€æœ‰å¤–éƒ¨APIä¸å¯ç”¨ï¼Œæ˜å¤©å°†è‡ªåŠ¨é‡è¯•
  ```

---

## åœºæ™¯4: Webhookè§¦å‘ä»£ç å®¡æŸ¥ï¼ˆäº‹ä»¶å¼Â·çŸ­æœŸï¼‰

### è§’è‰²
ä¸ªäººå¼€å‘è€…ï¼ˆTaylorï¼‰

### ç›®æ ‡
GitHub PRåˆ›å»ºåè‡ªåŠ¨è§¦å‘ä»£ç å®¡æŸ¥

### å‰ç½®æ¡ä»¶
- GitHub Webhookå·²é…ç½®
- PonyBunnyæœ‰ä»“åº“è¯»æƒé™

---

### æˆåŠŸè·¯å¾„ï¼ˆHappy Pathï¼‰

**æ­¥éª¤1: ç”¨æˆ·åˆ›å»ºPR**:
```
Tayloråœ¨GitHubåˆ›å»ºPR #99:
  Title: "refactor: optimize database queries"
  Files changed: 3 (db/queries.ts, db/index.ts, tests/db.test.ts)
  Lines: +120 -85
```

**æ­¥éª¤2: GitHubè§¦å‘Webhook**:
```
POST https://ponybunny.example.com/webhook/github
X-Hub-Signature-256: sha256=abc...
X-GitHub-Event: pull_request

{
  "action": "opened",
  "pull_request": {
    "number": 99,
    "title": "refactor: optimize database queries",
    "html_url": "https://github.com/taylor/app/pull/99",
    "diff_url": "https://github.com/taylor/app/pull/99.diff"
  }
}
```

**æ­¥éª¤3: Agentè‡ªåŠ¨åˆ†æ**:
```
ç³»ç»Ÿåˆ›å»ºGoalï¼ˆgoal-pr-99ï¼‰:
  "å®¡æŸ¥PR #99: refactor database queries"
  
Agentæ‰§è¡Œ:
  1. ä¸‹è½½diffæ–‡ä»¶
  2. åˆ†æä»£ç å˜æ›´
  3. æ£€æŸ¥ï¼š
     - SQLæ³¨å…¥é£é™©
     - N+1æŸ¥è¯¢é—®é¢˜
     - ç´¢å¼•ä½¿ç”¨
     - æµ‹è¯•è¦†ç›–
```

**æ­¥éª¤4: å‘å¸ƒå®¡æŸ¥ç»“æœ**:
```
Agent â†’ GitHub PR #99 (è‡ªåŠ¨è¯„è®º):

"## ğŸ¤– AI Code Review

### Summary
ä¼˜åŒ–äº†3ä¸ªæ•°æ®åº“æŸ¥è¯¢ï¼Œæ•´ä½“æ”¹è¿›è‰¯å¥½ã€‚å‘ç°1ä¸ªæ½œåœ¨é—®é¢˜ã€‚

### âœ… Positive Changes
- ä½¿ç”¨JOINæ›¿ä»£N+1æŸ¥è¯¢ï¼ˆ`getUserOrders()`ï¼‰
- æ·»åŠ ç´¢å¼•ä¼˜åŒ–`WHERE`å­å¥
- æµ‹è¯•è¦†ç›–ç‡ä»60%æå‡åˆ°85%

### âš ï¸ Issues Found (1)

**Medium Severity: Potential SQL Injection**

**Location**: `db/queries.ts:45`

```typescript
// Before (vulnerable)
const query = `SELECT * FROM users WHERE id = ${userId}`;

// After (still vulnerable)
const query = `SELECT * FROM users WHERE name = '${userName}'`;
```

**Recommendation**: ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
```typescript
const query = `SELECT * FROM users WHERE name = ?`;
db.execute(query, [userName]);
```

### ğŸ“Š Quality Metrics
- Complexity: +2% (acceptable)
- Test Coverage: 85% (âœ… target: >80%)
- Performance: ~30% faster (estimated)

**Overall**: Approve with suggested fix âœ…
"
```

**æ­¥éª¤5: ç”¨æˆ·ä¿®å¤å¹¶æ›´æ–°PR**:
```
Taylorä¿®å¤SQLæ³¨å…¥é—®é¢˜ â†’ æ–°commitæ¨é€
```

**æ­¥éª¤6: Agentè‡ªåŠ¨re-review**:
```
æ£€æµ‹åˆ°æ–°commit â†’ è‡ªåŠ¨é‡æ–°å®¡æŸ¥

Agent â†’ GitHub PR #99:
"âœ… SQL injection issueå·²ä¿®å¤ï¼ŒLGTMï¼"
```

**ç»“æœ**:
- GoalçŠ¶æ€: `completed`
- è€—æ—¶: 2åˆ†é’Ÿ
- Artifacts: å®¡æŸ¥æŠ¥å‘Šï¼ˆMarkdownï¼‰

---

### å¤±è´¥è·¯å¾„F: Webhookç­¾åéªŒè¯å¤±è´¥

**æ­¥éª¤2: ä¼ªé€ çš„Webhookè¯·æ±‚**:
```
POST /webhook/github
X-Hub-Signature-256: sha256=FAKE_SIGNATURE

{
  "action": "opened",
  "pull_request": { ... }
}
```

**ç³»ç»Ÿè¡Œä¸º**:
```
GatewayéªŒè¯ç­¾å:
  è®¡ç®—expected = HMAC-SHA256(body, webhook_secret)
  æ¯”è¾ƒexpected vs received â†’ âŒ ä¸åŒ¹é…
```

**æ‹’ç»è¯·æ±‚**:
```
HTTP 403 Forbidden
{
  "error": "Invalid signature"
}
```

**Audit Logè®°å½•**:
```
{
  "timestamp": "2026-01-31T12:00:00Z",
  "level": "WARN",
  "action": "webhook.signature_failed",
  "ip": "203.0.113.45",
  "reason": "HMAC signature mismatch"
}
```

**å‘Šè­¦è§¦å‘**:
- è¿ç»­3æ¬¡ç­¾åå¤±è´¥ â†’ å‘é€Telegramé€šçŸ¥ç»™ç®¡ç†å‘˜
- å¯ç–‘IPè®°å½•ï¼ˆç”¨äºåç»­åˆ†æï¼‰

---

## åœºæ™¯5: è·¨è®¾å¤‡ååŒï¼ˆå‘½ä»¤å¼Â·çŸ­æœŸï¼‰

### è§’è‰²
ä¸ªäººç”¨æˆ·ï¼ˆMorganï¼‰

### ç›®æ ‡
è¿œç¨‹æ‹æ‘„åŠå…¬å®¤ç™½æ¿å¹¶OCRè½¬æ–‡æœ¬

### å‰ç½®æ¡ä»¶
- iPadå·²é…å¯¹åˆ°PonyBunny
- iPadåœ¨åŠå…¬å®¤WiFiä¸‹ï¼ˆä¸GatewayåŒç½‘ç»œï¼‰
- OCRå·¥å…·å·²é…ç½®

---

### æˆåŠŸè·¯å¾„ï¼ˆHappy Pathï¼‰

**æ­¥éª¤1: ç”¨æˆ·å‘èµ·è¯·æ±‚**:
```
[Telegram] Morgan: "æ‹æ‘„ä¼šè®®å®¤ç™½æ¿å¹¶æå–æ–‡å­—"
```

**æ­¥éª¤2: Agentåˆ†è§£ä»»åŠ¡**:
```
Goal: "æ‹æ‘„ç™½æ¿å¹¶OCR"
Work Items:
  wi-1: è°ƒç”¨iPadç›¸æœºæ‹ç…§
  wi-2: OCRè¯†åˆ«æ–‡å­—
  wi-3: æ ¼å¼åŒ–ä¸ºMarkdown
```

**æ­¥éª¤3: è·¨è®¾å¤‡å·¥å…·è°ƒç”¨**:
```
Agent â†’ Gateway â†’ Node Registry:
  æŸ¥æ‰¾å¯ç”¨è®¾å¤‡ â†’ æ‰¾åˆ°iPad (device-ipad-001)
  
Gateway â†’ iPad (WebSocket RPC):
{
  "type": "invoke.request",
  "id": "req-456",
  "tool": "camera.snap",
  "params": {
    "camera": "back",
    "flash": false,
    "quality": "high"
  },
  "timeout": 10000
}
```

**æ­¥éª¤4: iPadæ‰§è¡Œæ‹ç…§**:
```
iPad App:
  1. è°ƒç”¨iOS Camera API
  2. æ‹æ‘„ç…§ç‰‡ï¼ˆ3024x4032, 2.1MBï¼‰
  3. ä¸Šä¼ åˆ°Gateway

iPad â†’ Gateway:
{
  "type": "invoke.result",
  "id": "req-456",
  "success": true,
  "result": {
    "image_url": "data:image/jpeg;base64,/9j/4AAQ...",
    "metadata": {
      "timestamp": "2026-01-31T14:30:00Z",
      "resolution": "3024x4032",
      "size_bytes": 2211840
    }
  }
}
```

**æ­¥éª¤5: OCRå¤„ç†**:
```
Agentæ‰§è¡Œwi-2:
  1. è°ƒç”¨OCRå·¥å…·ï¼ˆTesseractï¼‰
  2. è¯†åˆ«æ–‡å­—ï¼ˆä¸­è‹±æ–‡æ··åˆï¼‰
  3. ç½®ä¿¡åº¦: 92%
  
è¯†åˆ«ç»“æœ:
"
é¡¹ç›®è¿›åº¦è®¨è®º (2026-01-31)

1. ç”¨æˆ·è®¤è¯æ¨¡å— - å·²å®Œæˆ âœ“
2. æ”¯ä»˜é›†æˆ - è¿›è¡Œä¸­ (80%)
3. æ•°æ®åˆ†æä»ªè¡¨ç›˜ - å¾…å¼€å§‹

ä¸‹å‘¨è®¡åˆ’:
- å®Œæˆæ”¯ä»˜æµ‹è¯•
- å¯åŠ¨ä»ªè¡¨ç›˜UIè®¾è®¡

é—®é¢˜è·Ÿè¸ª:
Issue #234: APIæ€§èƒ½ä¼˜åŒ–
Issue #245: ç§»åŠ¨ç«¯é€‚é…
"
```

**æ­¥éª¤6: äº¤ä»˜ç»“æœ**:
```
Agent â†’ Telegram:
"âœ… ç™½æ¿å†…å®¹æå–å®Œæˆ

è¯†åˆ«æ–‡å­—ï¼ˆç½®ä¿¡åº¦92%ï¼‰:
---
é¡¹ç›®è¿›åº¦è®¨è®º...
ï¼ˆå®Œæ•´å†…å®¹ï¼‰
---

ğŸ“ åŸå§‹å›¾ç‰‡: /artifacts/whiteboard_20260131.jpg
ğŸ“„ æ–‡æœ¬æ–‡ä»¶: /artifacts/whiteboard_20260131.md

éœ€è¦æˆ‘æ ¹æ®è¿™äº›å†…å®¹åˆ›å»ºTODOåˆ—è¡¨å—ï¼Ÿ"
```

**ç»“æœ**:
- GoalçŠ¶æ€: `completed`
- è€—æ—¶: 25ç§’
- Artifacts: å›¾ç‰‡ + Markdownæ–‡æœ¬

---

### å¤±è´¥è·¯å¾„G: è®¾å¤‡ç¦»çº¿ï¼ˆè‡ªåŠ¨é™çº§ï¼‰

**æ­¥éª¤3: è®¾å¤‡ä¸å¯ç”¨**:
```
Agent â†’ Gateway â†’ Node Registry:
  æŸ¥æ‰¾iPad â†’ âŒ è®¾å¤‡ç¦»çº¿ï¼ˆæœ€ååœ¨çº¿: 2å°æ—¶å‰ï¼‰
```

**Agentè‡ªä¸»å†³ç­–**:
```
æ£€æµ‹åˆ°è®¾å¤‡ä¸å¯ç”¨ â†’ è¯„ä¼°æ›¿ä»£æ–¹æ¡ˆ:
  Option A: ç­‰å¾…è®¾å¤‡ä¸Šçº¿ï¼ˆä¸ç¡®å®šæ—¶é—´ï¼‰
  Option B: è¯·æ±‚ç”¨æˆ·æ‰‹åŠ¨æ‹ç…§
  Option C: ç»ˆæ­¢ä»»åŠ¡
  
é€‰æ‹©: Option Bï¼ˆæœ€å¿«æ¢å¤ï¼‰
```

**Escalationï¼ˆä½ç´§æ€¥åº¦ï¼‰**:
```
Agent â†’ Telegram:
"ğŸ“± iPadå½“å‰ç¦»çº¿ï¼Œæ— æ³•è¿œç¨‹æ‹ç…§

æ›¿ä»£æ–¹æ¡ˆ:
1. è¯·ç”¨æ‰‹æœºæ‹æ‘„ç™½æ¿å¹¶å‘é€ç»™æˆ‘
2. ç­‰å¾…iPadä¸Šçº¿ï¼ˆå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼‰

å¦‚ä½•ç»§ç»­ï¼Ÿ"
```

**ç”¨æˆ·å“åº”**:
```
[Telegram] Morgan: /attach whiteboard_photo.jpg
```

**æ¢å¤æ‰§è¡Œ** â†’ è·³è¿‡wi-1ï¼Œç›´æ¥æ‰§è¡Œwi-2ï¼ˆOCRï¼‰

---

## è·¨åœºæ™¯è´¨é‡æŒ‡æ ‡

### è‡ªä¸»å®Œæˆç‡

| åœºæ™¯ç±»å‹ | ç›®æ ‡ | å®é™…ï¼ˆæµ‹è¯•ï¼‰ |
|:--------|:-----|:-----------|
| å³æ—¶å“åº” | \u003e 95% | 97% |
| çŸ­æœŸä»»åŠ¡ | \u003e 80% | 85% |
| ä¸­æœŸç›®æ ‡ | \u003e 70% | 72% |
| é•¿æœŸé¡¹ç›® | \u003e 60% | 65% |

### å‡çº§å¿…è¦æ€§

**åˆç†Escalationç¤ºä¾‹**:
- ç¼ºå°‘å‡­è¯ï¼ˆAPI Keyï¼‰
- ç”¨æˆ·å†³ç­–ç‚¹ï¼ˆé€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆï¼‰
- Budgetå³å°†è€—å°½
- é£é™©æ“ä½œï¼ˆåˆ é™¤ç”Ÿäº§æ•°æ®ï¼‰

**ä¸åˆç†Escalationç¤ºä¾‹**ï¼ˆåº”é¿å…ï¼‰:
- ç®€å•è¯­æ³•é”™è¯¯ï¼ˆåº”è‡ªåŠ¨é‡è¯•ï¼‰
- æ–‡æ¡£ä¸æ¸…æ™°ï¼ˆåº”å°è¯•æ¨æ–­ï¼‰
- æ€§èƒ½ä¼˜åŒ–é€‰æ‹©ï¼ˆåº”è‡ªä¸»å†³ç­–ï¼‰

---

## æ–‡æ¡£å¯¼èˆª

**å‰ç½®é˜…è¯»**:
- [00-vision-and-problem.md](./00-vision-and-problem.md) â€” ç›®æ ‡ç”¨æˆ·
- [12-human-interaction-contracts.md](./12-human-interaction-contracts.md) â€” äº¤äº’å¥‘çº¦

**ç›¸å…³Tier 3æ–‡æ¡£**:
- [20-capability-requirements.md](./20-capability-requirements.md) â€” èƒ½åŠ›éœ€æ±‚
- [22-quality-risk-and-compliance.md](./22-quality-risk-and-compliance.md) â€” è´¨é‡ä¸é£é™©

**æµ‹è¯•å‚è€ƒ**:
- `/docs/engineering/testing.md` â€” æµ‹è¯•ç­–ç•¥

---

**ç‰ˆæœ¬å†å²**:
- v2.0 (2026-01-31): ä»user-stories.mdé‡æ„ï¼Œå¢åŠ å¤±è´¥è·¯å¾„å’Œå®Œæ•´æ—…ç¨‹
- v1.0 (2026-01-15): åˆå§‹ç‰ˆæœ¬ï¼ˆçº¯ç”¨æˆ·æ•…äº‹ï¼‰
