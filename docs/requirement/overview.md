# PonyBunny - 项目概述

## 项目定位

**Durable like a pony. Fast like a bunny. Local-first, security-first, and trim-to-fit — know your AI agent like you know your staff.**

PonyBunny 是一个**个人AI Agent Gateway系统**，专为需要**24x7自动工作能力**的个人和小微团队设计。它不是企业协作平台，而是一个**可信赖的数字员工**，能够像人类一样在电脑前持续工作，处理自动化任务、响应事件、管理个人工作流。

## 核心隐喻解读

### 🐴 Durable like a Pony（持久可靠）
- **长期记忆维持**：突破LLM上下文窗口限制，支持无限长的对话历史，像老员工一样记住所有历史决策
- **故障自愈**：多层failover机制，LLM API故障时自动降级而非中断工作
- **24x7运行**：通过Cron Lane支持定时任务，像值班员工一样全天候工作
- **数据持久化**：所有对话、决策、工具调用完整记录，系统重启后无缝恢复

### 🐰 Fast like a Bunny（高性能）
- **即时响应**：P95响应时间 < 2秒，无需等待
- **并发处理**：主任务、子任务、定时任务互不阻塞（Lane-based调度）
- **智能缓存**：Embedding缓存减少90%+ API调用，节省个人开支
- **流式输出**：WebSocket实时传输，像真人打字一样逐字显示

### 🏠 Local-first（本地优先）
- **完全自主**：所有数据存储在本地，无需依赖外部服务
- **单机运行**：一条Docker命令即可启动完整系统
- **离线可用**：支持本地模型（Ollama/LM Studio），断网也能工作
- **隐私保护**：对话数据永不上传，适合处理个人敏感信息

### 🔒 Security-first（安全第一）
- **Docker沙箱**：Agent代码执行完全隔离，防止误操作破坏系统
- **设备认证**：控制个人设备（iPhone/iPad/Mac）需要显式配对
- **无密钥泄露**：API Key加密存储在本地，不通过网络传输
- **审计记录**：每个操作都有完整日志，方便回溯和调试

### ✂️ Trim-to-fit（精简适配）
- **一键部署**：Docker Compose一行命令启动，无需复杂配置
- **成本优化**：混合模型策略（简单任务用便宜模型），个人用户API成本降低60-80%
- **按需加载**：模块化架构，仅加载需要的Channel和Tool
- **资源友好**：单机内存占用 < 2GB，适合个人电脑或廉价VPS

### 👥 Know Your AI（可理解性）
- **完整日志**：每次工具调用、每条消息都有记录，方便调试
- **思考可视化**：Thinking Mode显示Agent推理过程，不是黑盒
- **随时接管**：支持立即中止Agent执行，保持控制权
- **透明决策**：所有操作可追溯，像查看员工工作日志一样清晰

## 目标用户画像

### 1. 个人开发者
- **痛点**：需要AI辅助编程、自动化运维，但不想依赖云端服务
- **需求**：本地部署、完全控制、低成本运营
- **场景**：代码审查、文档生成、定时构建检查、GitHub事件响应

### 2. 自雇者/Freelancer
- **痛点**：需要处理大量重复性工作（邮件、客户咨询、日程管理），时间宝贵
- **需求**：24x7自动响应、跨平台统一管理、记住长期客户信息
- **场景**：客户咨询自动回复、项目进度跟踪、定时发送报告

### 3. 小微团队（2-5人）
- **痛点**：团队小但工作多样，需要AI协助但预算有限
- **需求**：多人共享Agent、成本可控、简单部署
- **场景**：团队知识库问答、代码审查、文档整理、定时任务（每日站会提醒）

### 4. 隐私敏感个人用户
- **痛点**：需要AI处理个人财务、健康、日记等敏感数据，不能上传云端
- **需求**：数据100%本地化、离线可用、审计记录
- **场景**：个人日记总结、财务数据分析、医疗记录管理

### 5. 技术爱好者/Tinkerer
- **痛点**：想要定制化AI助手，但现有方案太封闭
- **需求**：可编程、可扩展、支持自定义工具
- **场景**：智能家居控制、个人设备协同（iPad拍照 → Mac处理）、自定义自动化流程

## 差异化竞争优势

### vs. ChatGPT Plus（$20/月订阅）
- ✅ **成本优势**：自托管无订阅费，API按需付费（个人用户月均 < $10）
- ✅ **数据主权**：对话数据不上传OpenAI，适合处理敏感信息
- ✅ **长期记忆**：突破单次对话限制，像真人助理一样记住所有历史
- ✅ **24x7自动化**：支持定时任务和Webhook触发，不只是被动聊天

### vs. AutoGPT/BabyAGI（自主Agent）
- ✅ **可控性**：用户随时可以中止任务，不是失控的自主循环
- ✅ **成本优化**：混合模型策略，不会无限烧钱
- ✅ **生产可用**：Docker沙箱隔离，不会误删文件或泄露密钥
- ✅ **审计记录**：完整日志，方便调试和回溯

### vs. Zapier/IFTTT（自动化平台）
- ✅ **AI增强**：不只是if-then规则，能理解自然语言和复杂逻辑
- ✅ **本地执行**：无需依赖第三方服务，数据不外泄
- ✅ **灵活扩展**：支持自定义工具，不受限于预设集成
- ✅ **对话式控制**：通过WhatsApp/Telegram自然交互，而非复杂配置界面

### vs. Obsidian + AI插件（个人知识管理）
- ✅ **主动工作**：Agent能主动执行任务，不只是被动回答问题
- ✅ **跨平台集成**：统一管理多个消息平台和设备
- ✅ **工具执行**：能执行代码、调用API，而非仅限于文本处理
- ✅ **24x7运行**：定时任务和后台处理，不需要人工触发

## 核心使用场景

### 场景1：个人开发者的24x7 DevOps助手
**用户**：独立开发者，维护多个开源项目

**工作流**：
1. **GitHub集成**：
   - 新Issue创建 → Webhook触发Agent分析 → 自动标记优先级
   - PR提交 → 自动代码审查 → 评论改进建议
   - CI失败 → 分析日志 → Slack通知具体问题

2. **定时任务**（Cron Lane）：
   - 每天8点：拉取所有仓库更新，生成日报
   - 每周一：统计Star/Fork增长，发送周报
   - 每月1号：生成月度Changelog

3. **交互式调试**：
   - 通过Telegram发送"分析最新的崩溃日志"
   - Agent读取服务器日志，定位问题，建议修复方案

**价值**：
- 节省每天2小时人工监控时间
- 问题响应从"次日"提升到"15分钟内"
- API成本 < $5/月（使用GPT-3.5处理简单任务）

---

### 场景2：Freelancer的智能客服系统
**用户**：自由设计师，服务20+长期客户

**工作流**：
1. **多Channel统一管理**：
   - 客户通过WhatsApp/Telegram/Discord咨询
   - Agent自动识别客户身份（基于Vector Memory）
   - 回答常见问题："上次设计稿的源文件在哪"、"收费标准是什么"

2. **长期记忆**：
   - 客户A在3个月前讨论的配色方案，Agent能准确回忆
   - 自动关联客户历史项目，提供个性化建议

3. **定时提醒**：
   - 每周五：发送本周进度报告给所有活跃客户
   - 项目截止前3天：自动提醒并确认最终细节

**价值**：
- 响应速度从"平均4小时"提升到"平均5分钟"
- 客户满意度提升30%（基于反馈）
- 释放每天1.5小时用于实际设计工作

---

### 场景3：小团队的知识库问答系统
**用户**：5人创业团队，技术栈复杂

**工作流**：
1. **代码库索引**（RAG）：
   - Agent自动索引所有代码文件到Vector Memory
   - 团队成员问"认证流程是怎么实现的" → 精准定位到相关代码

2. **文档生成**：
   - 新功能开发完成 → 自动生成API文档
   - 代码重构 → 自动更新架构图

3. **Onboarding助手**：
   - 新成员加入 → 通过Slack与Agent对话学习项目
   - "这个模块依赖哪些外部服务" → Agent基于代码分析回答

**价值**：
- 新成员上手时间从"2周"缩短到"3天"
- 文档维护成本降低80%
- 团队共享Agent实例，人均成本 < $3/月

---

### 场景4：隐私敏感的个人助理
**用户**：医生，需要管理患者笔记和研究资料

**工作流**：
1. **本地部署**：
   - 在MacBook Pro本地运行（loopback模式）
   - 使用Ollama本地模型（Llama 3），数据永不上传

2. **日记分析**：
   - 每天记录患者观察日记（语音输入 → 转文本）
   - Agent定期总结模式，辅助研究

3. **文献管理**：
   - 阅读医学论文PDF → Agent提取关键信息
   - 跨文献检索："哪些研究提到了X疗法的副作用"

**价值**：
- 100%隐私保护（HIPAA合规）
- 研究效率提升50%
- 零云端成本（仅本地计算）

---

### 场景5：智能家居 + 个人设备协同
**用户**：技术爱好者，拥有多个Apple设备

**工作流**：
1. **跨设备控制**：
   - "帮我用iPad拍摄书桌上的笔记" → Agent调用iPad相机
   - "把照片发送到Mac并转为Markdown" → 自动OCR + 格式化

2. **定时自动化**：
   - 每天7点：调用HomePod播放新闻摘要
   - 检测到离家 → 自动关闭MacBook上的工作应用

3. **智能提醒**：
   - 日历事件"会议30分钟后" → Agent分析会议主题
   - 自动准备相关文档并发送到iPad

**价值**：
- 个人工作流自动化程度80%+
- 设备间无缝协作
- 科技发烧友的"炫技"展示

## 成功指标定义

### 个人用户指标
- **自动化覆盖率**：≥ 60%的日常重复性任务被Agent处理
- **响应速度**：消息平台响应延迟 < 5秒（P95）
- **成本**：月均API开支 < $10（混合模型策略）
- **可靠性**：24x7运行，每月非计划停机 < 1小时

### 技术指标
- **内存占用**：单机运行 < 2GB RAM
- **启动时间**：Docker容器冷启动 < 30秒
- **并发处理**：单用户1-5个并发Session无阻塞
- **沙箱安全**：Agent代码执行100%隔离（Docker）

### 用户体验指标
- **部署时间**：从零到运行 < 15分钟（新手）
- **学习曲线**：3天内掌握基本配置和自定义工具
- **透明度**：100%的工具调用在日志可见

## 非目标（明确不做的事）

### ❌ 不是企业协作平台
- 不提供企业级RBAC权限管理
- 不支持跨组织的多租户隔离
- 不面向100+人的大型团队

### ❌ 不是AI训练平台
- 不提供Fine-tuning能力
- 不处理训练数据集管理
- 不是模型托管服务

### ❌ 不是通用知识库
- 不是Notion/Confluence的替代品
- RAG是辅助功能，不是核心卖点
- 不提供复杂的文档管理功能

### ❌ 不是云端SaaS
- 不提供托管服务（用户必须自部署）
- 不收集用户数据用于改进模型
- 不是"一键注册"的在线服务

## 技术栈概览

基于 `/docs/engineering` 的架构设计：

- **语言**：TypeScript (Node.js 22+)
- **通信**：WebSocket (JSON-based protocol)
- **数据存储**：SQLite (Vector Search) + JSON5 Files (Session State)
- **容器化**：Docker (沙箱执行环境)
- **并发控制**：Lane-based Queuing System
- **AI集成**：多Provider支持 (OpenAI, Anthropic, Google, Ollama)
- **部署模式**：单机Docker Compose（loopback/lan/tailnet）

## 演进路线

### Phase 1: 核心MVP（当前）
- ✅ Gateway + Agent Runtime
- ✅ 多Channel支持（WhatsApp/Telegram/Slack）
- ✅ Memory + Compaction（长期记忆）
- ✅ Docker Sandbox（安全隔离）
- ✅ Cron Lane（定时任务）

### Phase 2: 个人生产力增强（3个月）
- 🔲 移动端优化UI（响应式设计）
- 🔲 语音输入/输出集成
- 🔲 个人设备协同增强（iOS快捷指令集成）
- 🔲 成本分析仪表盘（API开支可视化）
- 🔲 一键备份/恢复

### Phase 3: 社区生态（6个月）
- 🔲 Tool Market（社区贡献工具）
- 🔲 配置模板库（常见场景一键安装）
- 🔲 Docker Hub官方镜像
- 🔲 视频教程与文档完善

### Phase 4: 高级自动化（12个月）
- 🔲 Multi-Agent协作（主Agent + 专职Subagent）
- 🔲 可视化工作流编辑器
- 🔲 浏览器自动化（Playwright集成）
- 🔲 本地模型优化（针对个人硬件调优）

## 开源策略

**License**: Apache 2.0（完全开源）

**商业模式**：
- **核心开源**：所有代码免费使用
- **可选服务**：
  - 付费技术支持（$50/小时咨询）
  - 企业定制开发
  - 托管方案（未来，针对不想自部署的用户）

**社区驱动**：
- GitHub Discussions（用户交流）
- Discord服务器（实时支持）
- 月度社区分享会（用户展示自定义工具）
